---
- name: Install RPM Fusion repositories
  dnf:
    name: "https://download1.rpmfusion.org/{{ item }}/fedora/rpmfusion-{{ item }}-release-{{ ansible_distribution_version }}.noarch.rpm"
    state: present
  with_items:
    - free
    - nonfree

- name: Install dependencies
  dnf:
    name:
      - libselinux-python
      - python-gpgme
      - python2-psutil
      - python2-devel
      - python3-devel
    state: present

- name: Install software
  dnf:
    name:
      - ImageMagick
      - ImageMagick-devel
      - asciinema
      - bat
      - darktable
      - direnv
      - entr
      - fd-find
      - freetype-freeworld
      - fzf
      - gimp
      - gnome-todo
      - httpie
      - inotify-tools
      - jq
      - keepassxc
      - kodi
      - lm_sensors
      - mongo-tools
      - mongodb
      - mongodb-server
      - nmap
      - redis
      - pwgen
      - qt5-qtwebkit-devel
      - ripgrep
      - seafile
      - seafile-client
      - snapd
      - sqlite
      - sqlite-devel
      - unrar
      - xclip
    state: present

- name: Configure user
  user:
    name: "{{ ansible_user }}"
    shell: /usr/bin/fish
    groups:
      - docker
      - wheel

- name: Disable bluetooth
  systemd:
    name: bluetooth
    state: stopped
    enabled: false
